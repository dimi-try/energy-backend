
# Дока по всем файлам этой директории
## api
Документация в разработке...
## crud
Документация в разработке...
## database
Документация в разработке...
## main
Документация в разработке...
## models
Документация в разработке...

## schemas

Файл `schemas.py` в проектах с FastAPI выполняет несколько ключевых функций, связанных с валидацией данных и сериализацией. Он основан на Pydantic, который используется в FastAPI для работы с данными.

### 1. Валидация данных:
Pydantic-схемы, служат для автоматической валидации входящих данных (например, данных, которые пользователь отправляет в запросе) и исходящих данных (например, ответа от API).

**Входящие данные**: Когда клиент отправляет данные (например, для создания нового объекта), Pydantic проверяет их правильность (тип данных, наличие обязательных полей и т. д.).

**Пример**: Если ты отправляешь JSON с полем `name` длиной более 64 символов, схема с ограничением длины выбросит ошибку.
```
class BrandBase(BaseModel): name: constr(max_length=64) # Поле name будет проверено на длину
 ```
### 2. Сериализация данных
 Pydantic-схемы отвечают за преобразование данных между объектами Python (например, объектами моделей SQLAlchemy) и форматами, которые удобно использовать в API (чаще всего это JSON).
 
 **Пример**: Когда из базы данных возвращается объект SQLAlchemy (например, бренд), схема преобразует его в JSON для отправки в ответе клиенту:
```
class Brand(BrandBase):
    id: int

    class Config:
        orm_mode = True  # Позволяет Pydantic работать с объектами ORM
```
### 3. Управление структурой ответа
 С помощью схем можно точно управлять тем, какие данные отправлять пользователю в ответе. Это позволяет, например, убрать лишние данные (например, `brand_id` в ответе для энергетиков) и вместо этого предоставить связанный объект `brand`.
 
 **Пример**: Схема позволяет исключить поле `brand_id` и заменить его полным объектом `brand`:
 ```
 class Energy(BaseModel):
    id: int
    name: str
    brand: Brand  # Возвращаем объект Brand вместо brand_id
    description: Optional[str]
 ```

### 4. Повторное использование структур данных
Pydantic-схемы позволяют легко повторно использовать описанные структуры данных. Например, одна и та же схема может использоваться для валидации данных при создании нового объекта и для возврата информации о существующем объекте (с некоторыми различиями, как в примере с `EnergyCreate` и `Energy`).

-   **Пример**: Ты можешь создать отдельную схему для валидации данных при создании (например, `EnergyCreate`) и другую для возврата данных с добавлением связанных объектов (например, `Energy`).

### 5. Документация API
FastAPI автоматически генерирует документацию для API на основе схем Pydantic. Это делает API самодокументируемым, и схемы помогают FastAPI точно описать структуру входных и выходных данных.

-   **Пример**: Когда ты добавляешь схему в качестве модели для эндпоинта, FastAPI включает её в документацию Swagger UI:
```
@router.post("/energy/", response_model=schemas.Energy)
```

### 6. Удобная работа с объектами ORM
Схемы Pydantic могут использоваться вместе с ORM (например, SQLAlchemy) благодаря настройке `orm_mode`. Это позволяет работать напрямую с объектами ORM без необходимости вручную преобразовывать их в словари.